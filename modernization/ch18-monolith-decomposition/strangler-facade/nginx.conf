# Ch18 Strangler Facade - Routes monolith → microservices
events {}

http {
  # Legacy Monolith (default)
  location / {
    proxy_pass http://monolith:8080;
  }
  
  # ✅ User Service EXTRACTED (Q2)
  location /api/users {
    proxy_pass http://user-service:3001;
  }
  
  # ✅ Payment Service EXTRACTED (Q3)  
  location /api/payments {
    proxy_pass http://payment-service:3002;
  }
  
  # Anti-Corruption Layer
  location /api/orders {
    # Translate monolith → microservice format
    proxy_pass http://order-service:3003;
    proxy_set_header X-Legacy-Format true;
  }
}
